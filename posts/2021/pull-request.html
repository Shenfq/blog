<!doctype html><html class="" data-reactroot=""><head><script src="/assets/hm.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"/>
<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="description" content="前端工程师，爱折腾，擅长 JavaScript，欢迎关注我的公众号「自然醒的笔记本」"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/>
<title data-react-helmet="true">你给开源框架提过 PR 吗？ · 自然醒的博客</title>
<link data-react-helmet="true" rel="stylesheet" href="/assets/index.css"/><link data-react-helmet="true" id="prismTheme" rel="stylesheet" href="/assets/prism.css"/>
<script data-react-helmet="true" >
    const shouldSetIsDark = document.cookie.includes('is_dark=1') ? true : document.cookie.includes('is_dark=0') ? false : window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (shouldSetIsDark) {
      document.documentElement.classList.add('is_dark');
      document.getElementById('prismTheme').href = "/assets/prism_tomorrow.css";
    }
  </script>
</head><body><a class="czs-menu-l show_on_mobile aside_button_open" href="#" style="background-image:url(&quot;/assets/czs-menu-l.svg&quot;)"></a><a class="show_on_mobile aside_button_text" href="/">自然醒的博客</a><aside class="hide_on_mobile"><div class="aside_card"><a class="czs-menu-l show_on_mobile aside_button_close" href="#" style="background-image:url(&quot;/assets/czs-close-l.svg&quot;)"></a><h1><a href="/">自然醒的博客</a></h1><p class="description">前端工程师，爱折腾，擅长 JavaScript，欢迎关注我的公众号「自然醒的笔记本」</p><ul class="social list_style_none"><li class="flex_center"><a class="czs-github-logo" href="https://github.com/Shenfq" target="_blank" style="background-image:url(&quot;/assets/czs-github-logo.svg&quot;)"></a></li><li class="flex_center"><a class="czs-message-l" href="mailto:shenfq95@foxmail.com" target="_blank" style="background-image:url(&quot;/assets/czs-message-l.svg&quot;)"></a></li><li style="flex-grow:1"></li><li class="toggle_dark flex_center"><span class="czs-sun" style="background-image:url(&quot;/assets/czs-sun.svg&quot;)"></span><span class="czs-sun-l" style="background-image:url(&quot;/assets/czs-sun-l.svg&quot;)"></span><span class="czs-moon" style="background-image:url(&quot;/assets/czs-moon.svg&quot;)"></span><span class="czs-moon-l" style="background-image:url(&quot;/assets/czs-moon-l.svg&quot;)"></span></li></ul><nav><ul class="menu list_style_none"><li><a class="flex_center" href="/"><span class="czs-home-l" style="background-image:url(&quot;/assets/czs-home-l.svg&quot;)"></span>首页</a></li><li><a class="flex_center" href="/categories/"><span class="czs-category-l" style="background-image:url(&quot;/assets/czs-category-l.svg&quot;)"></span>分类</a></li><li><a class="flex_center" href="/tags/"><span class="czs-tag-l" style="background-image:url(&quot;/assets/czs-tag-l.svg&quot;)"></span>标签</a></li><li><a class="flex_center" href="/about/"><span class="czs-about-l" style="background-image:url(&quot;/assets/czs-about-l.svg&quot;)"></span>关于</a></li><li><a class="flex_center" href="/archives/"><span class="czs-box-l" style="background-image:url(&quot;/assets/czs-box-l.svg&quot;)"></span>归档</a></li><li><a class="flex_center" href="/links/index.html"><span class="czs-link-l" style="background-image:url(&quot;/assets/czs-link-l.svg&quot;)"></span>友情链接</a></li></ul></nav></div><nav class="toc"><ol><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%BB%99%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6%E6%8F%90-pr">为什么要给开源框架提 PR？</a></li><li><a href="#%E5%A6%82%E4%BD%95%E5%9C%A8-github-%E4%B8%8A%E6%8F%90-pr">如何在 GitHub 上提 PR？</a><ol></ol></li></ol></nav></aside><section class="main"><h1>你给开源框架提过 PR 吗？</h1><div class="main_post_meta"><time dateTime="2021/08/04">2021-08-04</time> · <!-- -->shenfq</div><article><p>你有给开源的库或者框架提过 PR 吗？</p>
<p>如果没有，那么今天的文章会教你怎么给开源库提 PR。</p>
<h2 id="%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%BB%99%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6%E6%8F%90-pr">为什么要给开源框架提 PR？<a class="anchor" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%BB%99%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6%E6%8F%90-pr">§</a></h2>
<p>这件事还得从好几年前（2019年）说起，那时候在折腾一个虚拟 DOM 的玩具（参考之前的文章：<a href="https://blog.shenfq.com/posts/2019/%E8%99%9A%E6%8B%9FDOM%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.html">🔗虚拟DOM到底是什么？</a>），作为一个标准的前端工程，构建工具、Lint 工具、代码格式化都是必不可少的。</p>
<p>在构建工具上我选择了 <code>Rollup</code>，希望每次构建的时候都能自动进行代码的 Lint，所以引入了 <code>Rollup</code> 的一个插件：<a href="https://github.com/Shenfq/rollup-plugin-eslint"><code>rollup-plugin-eslint</code></a>。</p>
<p><img src="https://file.shenfq.com/pic/20210803211333" alt=""></p>
<p>在使用这个插件的过程中，发现和 <code>Webpack</code> 对应的插件 <a href="https://github.com/webpack-contrib/eslint-webpack-plugin"> <code>eslint-webpack-plugin</code></a> 还是有一些差距的。我在使用 <code>Webpack</code> 的 <code>eslint-webpack-plugin</code> 时候，只需要配置 <a href="https://github.com/webpack-contrib/eslint-webpack-plugin#fix"><code>fix</code> 属性</a>，就能够在保存代码的时候，自动对代码进行 fix。</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">ESLintPlugin</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'eslint-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ESLintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      fix<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'js'</span><span class="token punctuation">,</span> <span class="token string">'jsx'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre>
<p><img src="https://file.shenfq.com/pic/20210803211200.png" alt=""></p>
<p>而在使用 <code>rollup-plugin-eslint</code> 的时候，看文档上，好像没有提到这个选项，也就是说 <code>rollup-plugin-eslint</code> 根本不支持这个功能。然后，搜索了一下 Issues，不搜不要紧，一搜吓一跳，发现有人在 2016 年就提出了这个<a href="https://github.com/TrySound/rollup-plugin-eslint/issues/1">疑问😳</a>。</p>
<p><img src="https://file.shenfq.com/pic/20210803211629.png" alt=""></p>
<p>作者的回复也很简单，欢迎提交 PR。</p>
<p><img src="https://file.shenfq.com/pic/20210803211756.png" alt=""></p>
<p>我当时心想，这个功能这么久了都没人实现想必很难吧。但是隔壁的 <code>eslint-webpack-plugin</code> 明明支持这个功能，我去看看它怎么实现的不就行了🐶。</p>
<p>于是，我就把 <code>eslint-webpack-plugin</code> 的代码 clone 下来一顿搜索，发现它实现这个功能就用了<a href="https://github.com/webpack-contrib/eslint-webpack-plugin/blob/HEAD/src/getESLint.js#L38-L40">三行代码</a>。</p>
<pre class="language-js"><code class="language-js"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span><span class="token property-access">fix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">await</span> <span class="token maybe-class-name">ESLint</span><span class="token punctuation">.</span><span class="token method function property-access">outputFixes</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>激动的心，颤抖的手，我赶忙就去  <code>rollup-plugin-eslint</code> 那里提了个 <a href="https://github.com/TrySound/rollup-plugin-eslint/pull/27/files#diff-e727e4bdf3657fd1d798edcd6b099d6e092f8573cba266154583a746bba0f346">PR</a>。</p>
<blockquote>
<p>🔗PR: <a href="https://github.com/TrySound/rollup-plugin-eslint/pull/27">https://github.com/TrySound/rollup-plugin-eslint/pull/27</a></p>
</blockquote>
<p><img src="https://file.shenfq.com/pic/20210803212810.png" alt=""></p>
<p>关键是，作者都没想到这个东西居然这么简单就实现了。</p>
<p><img src="https://file.shenfq.com/pic/20210803212924.png" alt=""></p>
<h2 id="%E5%A6%82%E4%BD%95%E5%9C%A8-github-%E4%B8%8A%E6%8F%90-pr">如何在 GitHub 上提 PR？<a class="anchor" href="#%E5%A6%82%E4%BD%95%E5%9C%A8-github-%E4%B8%8A%E6%8F%90-pr">§</a></h2>
<p>上面是我第一次提 PR 的一个心路历程，如果你也发现了你现在使用的什么开源框架有待优化的地方，这里再教大家怎么在 GitHub 上提交一个 PR。</p>
<h4 id="%E5%AF%B9%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6%E8%BF%9B%E8%A1%8C-fork">对开源框架进行 Fork<a class="anchor" href="#%E5%AF%B9%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6%E8%BF%9B%E8%A1%8C-fork">§</a></h4>
<p>首先把你要提交 PR 的项目 Fork 到自己的仓库。</p>
<p><img src="https://file.shenfq.com/pic/20210803213434.png" alt=""></p>
<p>然后到自己的仓库中，将 Fork 的项目 clone 到本地。</p>
<p><img src="https://file.shenfq.com/pic/20210803213637.png" alt=""></p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">git</span> clone <a class="token email-link" href="mailto:git@github.com">git@github.com</a>:Shenfq/rollup-plugin-eslint.git
</code></pre>
<h4 id="%E5%88%87%E6%8D%A2%E5%88%B0%E6%96%B0%E5%88%86%E6%94%AF%E6%8F%90%E4%BA%A4%E5%8F%98%E6%9B%B4%E6%8E%A8%E9%80%81%E5%88%B0%E8%BF%9C%E7%A8%8B">切换到新分支，提交变更，推送到远程<a class="anchor" href="#%E5%88%87%E6%8D%A2%E5%88%B0%E6%96%B0%E5%88%86%E6%94%AF%E6%8F%90%E4%BA%A4%E5%8F%98%E6%9B%B4%E6%8E%A8%E9%80%81%E5%88%B0%E8%BF%9C%E7%A8%8B">§</a></h4>
<p>代码 clone 到本地之后，先切换一个新的分支，分支名最后贴紧这次更新的内容。</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">git</span> checkout -b feature/add-fix-option
</code></pre>
<p>在新分支修改代码：</p>
<pre class="language-diff"><code class="language-diff"><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>  if (options.fix &amp;&amp; report) {
<span class="token prefix inserted">+</span>    CLIEngine.outputFixes(report);
<span class="token prefix inserted">+</span>  }
</span></code></pre>
<p>提交变更：</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
$ <span class="token function">git</span> commit -m <span class="token string">"feat: add options.fix"</span>
</code></pre>
<p>最后将新的分支推送到远程：</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">git</span> push --set-upstream origin feature/add-fix-option
</code></pre>
<h4 id="%E6%96%B0%E5%BB%BA-pr">新建 PR<a class="anchor" href="#%E6%96%B0%E5%BB%BA-pr">§</a></h4>
<p>在自己的 GitHub 仓库中找到对应项目，打开 <code>Pull requests</code> Tab，点击 <code>New pull request</code> 按钮，新建一个 PR。</p>
<p><img src="https://file.shenfq.com/pic/20210803215832.png" alt=""></p>
<p>然后，在下面的界面中，选择刚刚提交的分支，最后点击 <code>Create pull request</code> 即可。</p>
<p><img src="https://file.shenfq.com/pic/20210803220329.png" alt=""></p>
<p>点击之后，就在对应的项目中提交了一个属于你的 PR 了。如果顺利的话，你就能『混』 到一个开源项目贡献者的头衔。</p></article></section><footer>Powered by <a href="https://github.com/xcatliu/pagic" target="_blank">Pagic</a></footer><script src="https://cdn.pagic.org/react@16.13.1/umd/react.production.min.js"></script><script src="https://cdn.pagic.org/react-dom@16.13.1/umd/react-dom.production.min.js"></script><script type="module" src="/index.js"></script></body></html>