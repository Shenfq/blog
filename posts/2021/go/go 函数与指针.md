---
title: Go å‡½æ•°ä¸æŒ‡é’ˆ
author: shenfq
date: 2021/04/12
categories:
- Go
tags:
- Go
- å‡½æ•°
- æŒ‡é’ˆ
---

# Go å‡½æ•°ä¸æŒ‡é’ˆ

## å‡½æ•°

å‡½æ•°å°±æ˜¯ä¸€æ®µåŸºæœ¬çš„ä»£ç å—ï¼Œä¸€èˆ¬ç”¨æ¥å¯¹éœ€è¦é‡å¤æ‰§è¡Œçš„ä»£ç è¿›è¡Œå¤ç”¨ã€‚åœ¨ go ä¸­ï¼Œå‡½æ•°æ˜¯ã€ä¸€ç­‰å…¬æ°‘ã€ï¼Œè¿™ä¸ js ç±»ä¼¼ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å°†å‡½æ•°å½“åšä¸€ä¸ªå˜é‡è¿›è¡Œä¼ é€’ã€‚

### å‡½æ•°å£°æ˜

ç”±äºæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œä¸ js ä¸åŒï¼Œåœ¨å‡½æ•°å£°æ˜çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æŒ‡å®šå‚æ•°ä¸è¿”å›å€¼çš„ç±»å‹ã€‚

```go
func max (n1, n2 int) int {
  var result int
  if n1 >= n2 {
    result = n1
  }
  if n1 < n2 {
    result = n2
  }
  return result
}
```

![](https://file.shenfq.com/pic/20210411144315.png)

åœ¨å£°æ˜å‡½æ•°å‚æ•°å’Œç±»å‹çš„æ—¶å€™ï¼Œä¸å£°æ˜å˜é‡ç±»ä¼¼ï¼Œå¯ä»¥ä¸€æ¬¡æ€§æŒ‡å®šå¤šä¸ªå‚æ•°çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥åˆ†åˆ«æŒ‡å®šå¤šä¸ªå‚æ•°ä¸ºä¸åŒç±»å‹ã€‚

```go
func max (n1 int, n2 int) int {
  â€¦â€¦
}
```

å¦‚æœå‡½æ•°è¿”å›å€¼æœ‰å¤šä¸ªï¼Œåœ¨æŒ‡å®šè¿”å›ç±»å‹çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®šæ¯ä¸ªè¿”å›å€¼çš„ç±»å‹ã€‚

```go
func max (n1 int, n2 int) (error, int) {
  â€¦â€¦
  return errors.New(""), result
}
```

ä¸Šé¢çš„ä»£ç ï¼Œè¡¨ç¤ºè¿”å›çš„æ—¶å€™éœ€è¦è¿”å›ä¸¤ä¸ªå€¼ï¼Œç¬¬ä¸€ä¸ªå€¼ä¸º `error` å¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºæ‰§è¡ŒæœŸé—´æ˜¯å¦å‡ºç°å¼‚å¸¸ã€‚è¿™ç§æ–¹å¼ä¹Ÿæ˜¯ Node.js ä¸­å¸¸è§çš„ `error-first callback` çš„å†™æ³•ã€‚

### ç‰¹æ®Šå‡½æ•°

åœ¨ go ä¸­ï¼Œæœ‰ä¸¤ä¸ªç‰¹æ®Šå‡½æ•°ï¼š`main`ã€`init`ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å£°æ˜ä¹‹åï¼Œä¸€èˆ¬ä¸éœ€è¦ä¸»åŠ¨è°ƒç”¨ï¼Œä¼šæœ‰è‡ªåŠ¨æ‰§è¡Œçš„æœºåˆ¶ã€‚

#### ğŸ” func main()

`main` å‡½æ•°æ˜¯ go è¯­è¨€ä¸­é»˜è®¤çš„å…¥å£å‡½æ•°ï¼Œåªèƒ½åº”ç”¨äº `package main` ä¸­ï¼Œå¦‚æœåœ¨å…¶ä»–çš„ `package` ä¸­ä¸ä¼šæ‰§è¡Œã€‚`main` å‡½æ•°æœ‰å¦‚ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š

- ä¸èƒ½å®šä¹‰å‚æ•°ï¼›
- ä¸èƒ½å®šä¹‰è¿”å›å€¼ï¼›
- å¿…é¡»åœ¨ `package main` ä¸­å£°æ˜ï¼›

#### ğŸ” func init()

`init` å‡½æ•°æ‰€æœ‰çš„åŒ…å¯åŠ¨çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œï¼Œæ‰§è¡Œæ—¶æœºæ¯” `main` å‡½æ•°æ—©ï¼Œä¸ `main` å‡½æ•°ä¸€æ ·ï¼Œä¸èƒ½å®šä¹‰å‚æ•°å’Œè¿”å›å€¼ã€‚

```go
package main

import "fmt"

func init() {
	fmt.Println("æ‰§è¡Œ init å‡½æ•°\n")
}
func main() {
	fmt.Println("æ‰§è¡Œ main å‡½æ•°\n")
}
```

![](https://file.shenfq.com/pic/20210411162546.png)

### å‡½æ•°è°ƒç”¨

å‡½æ•°çš„è°ƒç”¨æ¯”è¾ƒç®€å•ï¼Œå’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ç±»ä¼¼ï¼Œåªéœ€è¦å°†å‡½æ•°éœ€è¦æ¥å—çš„å‚æ•°ä¼ å…¥å…¶ä¸­ï¼Œåœ¨æ‰§è¡Œç»“æŸåï¼Œå°±èƒ½å¾—åˆ°å¯¹åº”çš„è¿”å›å€¼ã€‚

```go
// å®šä¹‰ max å‡½æ•°
func max (n1, n2 int) int {
  var result int
  if n1 >= n2 {
    result = n1
  }
  if n1 < n2 {
    result = n2
  }
  return result
}

func main () {
	var result = max(5, 100)
	fmt.Println("max return", result)
}
```

![](https://file.shenfq.com/pic/20210411163110.png)

### åŒ¿åå‡½æ•°

åŒ¿åå‡½æ•°å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰å®šä¹‰å‡½æ•°åçš„å‡½æ•°ï¼ŒåŒ¿åå‡½æ•°å¯ä»¥å½“æˆä¸€ä¸ªå€¼ï¼Œå°†å…¶èµ‹å€¼æ”¾åˆ°æŸä¸ªå˜é‡ä¸­ã€‚è¿™ä¹Ÿæ˜¯ä¹‹å‰ä¸ºä»€ä¹ˆè¯´å‡½æ•°æ˜¯ã€ä¸€ç­‰å…¬æ°‘ã€ï¼Œå°±æ˜¯å¯ä»¥å°†å‡½æ•°å½“æˆä¸€ä¸ªå˜é‡ã€‚

```go
var max = func (n1, n2 int) int {
  var result int
  if n1 >= n2 {
    result = n1
  }
  if n1 < n2 {
    result = n2
  }
  return result
}
var result = max(5, 100)
fmt.Println("max return", result)
```

### ç«‹å³æ‰§è¡Œå‡½æ•°

ç”±äº go ä¸­çš„å‡½æ•°æ˜¯ ã€ä¸€ç­‰å…¬æ°‘ã€ï¼Œå¯ä»¥åœ¨å£°æ˜ä¹‹åç«‹å³æ‰§è¡Œï¼Œå°±æ˜¯åœ¨å‡½æ•°å£°æ˜ç»“æŸåï¼Œç›´æ¥åŠ ä¸Šä¸€ä¸ªæ‹¬å·ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œæ‰§è¡Œä¹‹åçš„ç»“æœå¯ä»¥é€šè¿‡å˜é‡è¿›è¡Œæ¥æ”¶ã€‚

```go
import "math"

var Pi = func () float64 {
  return math.Pi
}()

fmt.Println("PI =",Pi)
```

![](https://file.shenfq.com/pic/20210411212512.png)

### é—­åŒ…

> é—­åŒ…å°±æ˜¯èƒ½å¤Ÿè¯»å–å…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ã€‚åœ¨æœ¬è´¨ä¸Šï¼Œé—­åŒ…æ˜¯å°†å‡½æ•°å†…éƒ¨å’Œå‡½æ•°å¤–éƒ¨è¿æ¥èµ·æ¥çš„æ¡¥æ¢ã€‚	â€”â€”[ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/%E9%97%AD%E5%8C%85/10908873?fr=aladdin)

ä¸Šé¢çš„æè¿°æ¥è‡ªç™¾åº¦ç™¾ç§‘ï¼Œåˆæ¬¡çœ‹æ¦‚å¿µæ¯”è¾ƒéš¾ç†è§£ï¼Œå¦‚æœç«™åœ¨ä½¿ç”¨çš„è§’åº¦æ¥è¯´ï¼Œé—­åŒ…å°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°è°ƒç”¨åï¼Œè¿”å›å¦ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå¹¶ä¿æŒå½“å‰å‡½æ•°å†…çš„å±€éƒ¨å˜é‡ï¼Œå¯ä»¥ç»™åŒ¿åå‡½æ•°å¼•ç”¨ã€‚

ä¸‹é¢æˆ‘ä»¬å¯ä»¥ç®€å•å®ç°ä¸€ä¸ªè¿­ä»£å™¨å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªåˆ‡ç‰‡ï¼Œè¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¯¥åŒ¿åå‡½æ•°æ¯æ¬¡æ‰§è¡Œï¼Œéƒ½ä¼šå–å‡ºåˆ‡ç‰‡çš„ä¸€ä¸ªå€¼ï¼Œç›´åˆ°å…¨éƒ¨è¯»å–ã€‚

```go
func generate(slice []int) func() (bool, int) {
	i := 0
	length := len(slice)
	return func () (bool, int) {
		if i >= length {
			return true, 0
		}
		var result = slice[i]
		i++
		return false, result
	}
}

func main() {
	slice := []int{1, 2, 3, 4, 5}
	nextNum := generate(slice)
	done, result := nextNum()
  // ç›´åˆ° done ä¸ç­‰äº falseï¼Œæ‰åœæ­¢
	for done == false {
		fmt.Println(result, done)
		done, result = nextNum()
	}
  fmt.Println(result, done)
}
```

![](https://file.shenfq.com/pic/20210412140712.png)

![](https://file.shenfq.com/pic/20210412141647.png)

## æŒ‡é’ˆ

æˆ‘ä»¬å‰é¢å¸¸è¯´çš„å˜é‡æŒ‡çš„ä¸€èˆ¬æ˜¯ä¸€ä¸ªå€¼ï¼ŒæŒ‡é’ˆæ˜¯æŒ‡å‘è¯¥å˜é‡å­˜å‚¨åœ¨å†…å­˜çš„ä½ç½®ã€‚æŒ‡é’ˆä¹Ÿå¯ä»¥å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œè¯¥å˜é‡ç§°ä¸ºã€æŒ‡é’ˆå˜é‡ã€ã€‚

![](https://file.shenfq.com/pic/20210412154247.png)

### æŒ‡é’ˆå˜é‡å£°æ˜

å£°æ˜æŒ‡é’ˆå˜é‡æ—¶ï¼Œéœ€è¦æŒ‡é’ˆæŒ‡å‘å“ªä¸€ç§ç±»å‹ï¼Œå› ä¸ºä¸åŒç±»å‹çš„å€¼åœ¨å†…å­˜å ç”¨çš„ç©ºé—´å¤§å°ä¸ä¸€æ ·ï¼Œä»…ä»…çŸ¥é“å†…å­˜åœ°å€è¿˜æ˜¯ä¸å¤Ÿï¼Œè¿˜éœ€è¦çŸ¥é“è¯¥å˜é‡åœ¨å†…å­˜ä¸­å ç”¨å¤šå¤§ç©ºé—´ã€‚å£°æ˜æŒ‡é’ˆå˜é‡åªéœ€è¦åœ¨ç±»å‹å‰ï¼ŒåŠ ä¸Š `*` å³å¯ã€‚

```go
var point *int // å£°æ˜ int ç±»å‹çš„æŒ‡é’ˆ
```

### æŒ‡é’ˆå˜é‡èµ‹å€¼

ç»™æŒ‡é’ˆå˜é‡èµ‹å€¼ï¼Œéœ€è¦åœ¨å¯¹åº”ç±»å‹çš„å˜é‡å‰åŠ ä¸Š`&`ç¬¦å·ï¼Œè¡¨ç¤ºå–å‡ºè¯¥å˜é‡çš„åœ°å€ã€‚

```go
var i = 1
var point *int
point = &i
```

### å€¼ä¼ é€’ä¸å¼•ç”¨ä¼ é€’

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼ å…¥å‡½æ•°çš„å‚æ•°ä»…ä¸ºå˜é‡çš„å€¼ï¼Œè¿™æ ·çš„ä¼ é€’è¢«ç§°ä¸ºå€¼ä¼ é€’ï¼Œåœ¨å‡½æ•°å†…å¯¹å‚æ•°ä¿®æ”¹ä¹Ÿä¸ä¼šå½±å“åˆ°å¤–éƒ¨å˜é‡ã€‚

```go
func addOne(slice []int, number int) {
	slice = append(slice, number)
	fmt.Println("inner slice =",  slice)
}

slice := []int{1, 2, 3}
addOne(slice, 100)
fmt.Println("outer slice =",  slice)
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å†™äº†ä¸€ä¸ªå‡½æ•°ï¼Œä¼šå¯¹ä¼ å…¥çš„åˆ‡ç‰‡è¿½åŠ ä¸€ä¸ªå€¼ï¼Œè°ƒç”¨ä¹‹åï¼Œæˆ‘ä»¬ä¼šå‘ç°å¤–éƒ¨åˆ‡ç‰‡çš„å€¼å¹¶æ²¡æœ‰å‘ç”Ÿå˜é‡ã€‚

![](https://file.shenfq.com/pic/20210412162927.png)

å¦‚æœéœ€è¦å¤–éƒ¨å˜é‡çš„å€¼ä¼šè·Ÿéšå‡½æ•°è°ƒç”¨å‘ç”Ÿå˜åŒ–ï¼Œå°±éœ€è¦å°†å˜é‡çš„æŒ‡é’ˆä¼ å…¥å‡½æ•°ä¸­ï¼Œè¿™æ ·çš„ä¼ é€’è¢«ç§°ä¸ºå¼•ç”¨ä¼ é€’ã€‚è¿™æ ·åœ¨å‡½æ•°ä¸­ä¿®æ”¹å‚æ•°å°±ä¼šå½±å“åˆ°å¤–éƒ¨çš„å˜é‡äº†ã€‚

```go
// æ­¤æ—¶ slice ä¸ºæŒ‡é’ˆå˜é‡
func addOne(slice *[]int, number int) {
  // é€šè¿‡ *slice å¯ä»¥å–å‡º slice æŒ‡é’ˆå¯¹åº”çš„å€¼
	*slice = append(*slice, number)
	fmt.Println("inner slice =",  *slice)
}

slice := []int{1, 2, 3}
addOne(&slice, 100)
fmt.Println("outer slice =",  slice)
```

![](https://file.shenfq.com/pic/20210412163342.png)

![](https://file.shenfq.com/pic/20210412164001.png)



