<!doctype html><html class="" data-reactroot=""><head><script src="/assets/hm.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"/>
<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="description" content="å‰ç«¯å·¥ç¨‹å¸ˆï¼Œçˆ±æŠ˜è…¾ï¼Œæ“…é•¿ JavaScriptï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œè‡ªç„¶é†’çš„ç¬”è®°æœ¬ã€"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/>
<title data-react-helmet="true">ä»€ä¹ˆæ˜¯ LFU ç®—æ³•ï¼Ÿ Â· è‡ªç„¶é†’çš„åšå®¢</title>
<link data-react-helmet="true" rel="stylesheet" href="/assets/index.css"/><link data-react-helmet="true" id="prismTheme" rel="stylesheet" href="/assets/prism.css"/>
<script data-react-helmet="true" >
    const shouldSetIsDark = document.cookie.includes('is_dark=1') ? true : document.cookie.includes('is_dark=0') ? false : window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (shouldSetIsDark) {
      document.documentElement.classList.add('is_dark');
      document.getElementById('prismTheme').href = "/assets/prism_tomorrow.css";
    }
  </script>
</head><body><a class="czs-menu-l show_on_mobile aside_button_open" href="#" style="background-image:url(&quot;/assets/czs-menu-l.svg&quot;)"></a><a class="show_on_mobile aside_button_text" href="/">è‡ªç„¶é†’çš„åšå®¢</a><aside class="hide_on_mobile"><div class="aside_card"><a class="czs-menu-l show_on_mobile aside_button_close" href="#" style="background-image:url(&quot;/assets/czs-close-l.svg&quot;)"></a><h1><a href="/">è‡ªç„¶é†’çš„åšå®¢</a></h1><p class="description">å‰ç«¯å·¥ç¨‹å¸ˆï¼Œçˆ±æŠ˜è…¾ï¼Œæ“…é•¿ JavaScriptï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œè‡ªç„¶é†’çš„ç¬”è®°æœ¬ã€</p><ul class="social list_style_none"><li class="flex_center"><a class="czs-github-logo" href="https://github.com/Shenfq" target="_blank" style="background-image:url(&quot;/assets/czs-github-logo.svg&quot;)"></a></li><li class="flex_center"><a class="czs-message-l" href="mailto:shenfq95@foxmail.com" target="_blank" style="background-image:url(&quot;/assets/czs-message-l.svg&quot;)"></a></li><li style="flex-grow:1"></li><li class="toggle_dark flex_center"><span class="czs-sun" style="background-image:url(&quot;/assets/czs-sun.svg&quot;)"></span><span class="czs-sun-l" style="background-image:url(&quot;/assets/czs-sun-l.svg&quot;)"></span><span class="czs-moon" style="background-image:url(&quot;/assets/czs-moon.svg&quot;)"></span><span class="czs-moon-l" style="background-image:url(&quot;/assets/czs-moon-l.svg&quot;)"></span></li></ul><nav><ul class="menu list_style_none"><li><a class="flex_center" href="/"><span class="czs-home-l" style="background-image:url(&quot;/assets/czs-home-l.svg&quot;)"></span>é¦–é¡µ</a></li><li><a class="flex_center" href="/categories/"><span class="czs-category-l" style="background-image:url(&quot;/assets/czs-category-l.svg&quot;)"></span>åˆ†ç±»</a></li><li><a class="flex_center" href="/tags/"><span class="czs-tag-l" style="background-image:url(&quot;/assets/czs-tag-l.svg&quot;)"></span>æ ‡ç­¾</a></li><li><a class="flex_center" href="/about/"><span class="czs-about-l" style="background-image:url(&quot;/assets/czs-about-l.svg&quot;)"></span>å…³äº</a></li><li><a class="flex_center" href="/archives/"><span class="czs-box-l" style="background-image:url(&quot;/assets/czs-box-l.svg&quot;)"></span>å½’æ¡£</a></li><li><a class="flex_center" href="/links/index.html"><span class="czs-link-l" style="background-image:url(&quot;/assets/czs-link-l.svg&quot;)"></span>å‹æƒ…é“¾æ¥</a></li></ul></nav></div><nav class="toc"><ol><li><a href="#%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0">ç®—æ³•å®ç°</a></li></ol></nav></aside><section class="main"><h1>ä»€ä¹ˆæ˜¯ LFU ç®—æ³•ï¼Ÿ</h1><div class="main_post_meta"><time dateTime="2022/03/22">2022-03-22</time> Â· <!-- -->shenfq</div><article><p>ä¸Šæ¬¡çš„æ–‡ç« ä»‹ç»äº† LRU ç®—æ³•ï¼Œä»Šå¤©æ‰“ç®—æ¥ä»‹ç»ä¸€ä¸‹ LFU ç®—æ³•ã€‚åœ¨ä¸Šç¯‡æ–‡ç« ä¸­æœ‰æåˆ°ï¼Œ LFUï¼ˆ<code>Least frequently used</code>ï¼šæœ€å°‘ä½¿ç”¨ï¼‰ç®—æ³•ä¸ LRU ç®—æ³•åªæ˜¯åœ¨æ·˜æ±°ç­–ç•¥ä¸Šæœ‰æ‰€ä¸åŒï¼ŒLRU å€¾å‘äºä¿ç•™æœ€è¿‘æœ‰ä½¿ç”¨çš„æ•°æ®ï¼Œè€Œ LFU å€¾å‘äºä¿ç•™ä½¿ç”¨é¢‘ç‡è¾ƒé«˜çš„æ•°æ®ã€‚</p>
<p>ä¸¾ä¸€ä¸ªç®€å•çš„ğŸŒ°ï¼šç¼“å­˜ä¸­æœ‰ Aã€B ä¸¤ä¸ªæ•°æ®ï¼Œä¸”å·²è¾¾åˆ°ä¸Šé™ï¼Œå¦‚æœ <code>æ•°æ® A</code> å…ˆè¢«è®¿é—®äº† 10 æ¬¡ï¼Œç„¶å <code>æ•°æ® B</code> è¢«è®¿é—® 1 æ¬¡ï¼Œå½“å­˜å…¥æ–°çš„ <code>æ•°æ® C</code> æ—¶ï¼Œå¦‚æœå½“å‰æ˜¯ LRU ç®—æ³•ï¼Œä¼šå°† <code>æ•°æ® A</code> æ·˜æ±°ï¼Œè€Œå¦‚æœæ˜¯ LFU ç®—æ³•ï¼Œåˆ™ä¼šæ·˜æ±° <code>æ•°æ® B</code>ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨ LRU ç®—æ³•ä¸­ï¼Œä¸ç®¡è®¿é—®çš„é¢‘ç‡ï¼Œåªè¦æœ€è¿‘è®¿é—®è¿‡ï¼Œå°±ä¸ä¼šå°†è¿™ä¸ªæ•°æ®æ·˜æ±°ï¼Œè€Œåœ¨ LFU ç®—æ³•ä¸­ï¼Œå°†è®¿é—®çš„é¢‘ç‡ä½œä¸ºæƒé‡ï¼Œåªè¦è®¿é—®é¢‘ç‡è¶Šé«˜ï¼Œè¯¥æ•°æ®å°±è¶Šä¸ä¼šè¢«æ·˜æ±°ï¼Œå³ä½¿è¯¥æ•°æ®å¾ˆä¹…æ²¡æœ‰è¢«è®¿é—®è¿‡ã€‚</p>
<h2 id="%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0">ç®—æ³•å®ç°<a class="anchor" href="#%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0">Â§</a></h2>
<p>æˆ‘ä»¬è¿˜æ˜¯é€šè¿‡ä¸€æ®µ JavaScript ä»£ç æ¥å®ç°è¿™ä¸ªé€»è¾‘ã€‚</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">LFUCache</span> <span class="token punctuation">{</span>
	freqs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// ç”¨äºæ ‡è®°è®¿é—®é¢‘ç‡</span>
	cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// ç”¨äºç¼“å­˜æ‰€æœ‰æ•°æ®</span>
	capacity <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// ç¼“å­˜çš„æœ€å¤§å®¹é‡</span>
	<span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">capacity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å­˜å‚¨ LFU å¯ç¼“å­˜çš„æœ€å¤§å®¹é‡</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">capacity</span> <span class="token operator">=</span> capacity
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>ä¸ LRU ç®—æ³•ä¸€æ ·ï¼ŒLFU ç®—æ³•ä¹Ÿéœ€è¦å®ç° <code>get</code> ä¸ <code>put</code> ä¸¤ä¸ªæ–¹æ³•ï¼Œç”¨äºè·å–ç¼“å­˜å’Œè®¾ç½®ç¼“å­˜ã€‚</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">LFUCache</span> <span class="token punctuation">{</span>
  <span class="token comment">// è·å–ç¼“å­˜</span>
	<span class="token function">get</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token comment">// è®¾ç½®ç¼“å­˜</span>
	<span class="token function">put</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>è€è§„çŸ©ï¼Œå…ˆçœ‹è®¾ç½®ç¼“å­˜çš„éƒ¨åˆ†ã€‚å¦‚æœè¯¥ç¼“å­˜çš„ key ä¹‹å‰å­˜åœ¨ï¼Œéœ€è¦æ›´æ–°å…¶å€¼ã€‚</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">LFUCache</span> <span class="token punctuation">{</span>
  <span class="token comment">// cache ä½œä¸ºç¼“å­˜çš„å­˜å‚¨å¯¹è±¡</span>
  <span class="token comment">// å…¶è§£æ„ä¸º: { key: { freq: 0, value: '' } }</span>
  <span class="token comment">// freq è¡¨ç¤ºè¯¥æ•°æ®è¯»å–çš„é¢‘ç‡ï¼›</span>
  <span class="token comment">// value è¡¨ç¤ºç¼“å­˜çš„æ•°æ®ï¼›</span>
	cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// fregs ç”¨äºå­˜å‚¨ç¼“å­˜æ•°æ®çš„é¢‘ç‡</span>
  <span class="token comment">// å…¶è§£æ„ä¸º: { 0: [a], 1: [b, c], 2: [d] }</span>
  <span class="token comment">// è¡¨ç¤º a è¿˜æ²¡è¢«è¯»å–ï¼Œb/c å„è¢«è¯»å–1æ¬¡ï¼Œdè¢«è¯»å–2æ¬¡</span>
  freqs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// è®¾ç½®ç¼“å­˜</span>
  <span class="token function">put</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å…ˆåˆ¤æ–­ç¼“å­˜æ˜¯å¦å­˜åœ¨</span>
    <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cache</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¦‚æœå­˜åœ¨ï¼Œåˆ™é‡ç½®ç¼“å­˜çš„å€¼</span>
      cache<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> value
      <span class="token comment">// æ›´æ–°ä½¿ç”¨é¢‘ç‡</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span> freq <span class="token punctuation">}</span> <span class="token operator">=</span> cache
      <span class="token comment">// ä» freqs ä¸­è·å–å¯¹åº” key çš„æ•°ç»„</span>
      <span class="token keyword">const</span> keys <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">freqs</span><span class="token punctuation">[</span>freq<span class="token punctuation">]</span>
      <span class="token keyword">const</span> index <span class="token operator">=</span> keys<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
      <span class="token comment">// ä»é¢‘ç‡æ•°ç»„ä¸­ï¼Œåˆ é™¤å¯¹åº”çš„ key</span>
      keys<span class="token punctuation">.</span><span class="token method function property-access">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>keys<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœå½“å‰é¢‘ç‡å·²ç»ä¸å­˜åœ¨ key</span>
        <span class="token comment">// å°† key åˆ é™¤</span>
        <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">freqs</span><span class="token punctuation">[</span>freq<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// æ›´æ–°é¢‘ç‡åŠ  1</span>
      freq <span class="token operator">=</span> <span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token property-access">freq</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token comment">// æ›´æ–°é¢‘ç‡æ•°ç»„</span>
      <span class="token keyword">const</span> freqMap <span class="token operator">=</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">freqs</span><span class="token punctuation">[</span>freq<span class="token punctuation">]</span> <span class="token operator">||</span>
            <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">freqs</span><span class="token punctuation">[</span>freq<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      freqMap<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
      <span class="token keyword control-flow">return</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>å¦‚æœè¯¥ç¼“å­˜ä¸å­˜åœ¨ï¼Œè¦å…ˆåˆ¤æ–­ç¼“å­˜æ˜¯å¦è¶…è¿‡å®¹é‡ï¼Œå¦‚æœè¶…è¿‡ï¼Œéœ€è¦æ·˜æ±°æ‰ä½¿ç”¨é¢‘ç‡æœ€ä½çš„æ•°æ®ã€‚</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">LFUCache</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ›´æ–°é¢‘ç‡</span>
  <span class="token function">active</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> cache</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ›´æ–°ä½¿ç”¨é¢‘ç‡</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> freq <span class="token punctuation">}</span> <span class="token operator">=</span> cache
    <span class="token comment">// ä» freqs ä¸­è·å–å¯¹åº” key çš„æ•°ç»„</span>
    <span class="token keyword">const</span> keys <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">freqs</span><span class="token punctuation">[</span>freq<span class="token punctuation">]</span>
    <span class="token keyword">const</span> index <span class="token operator">=</span> keys<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token comment">// ä»é¢‘ç‡æ•°ç»„ä¸­ï¼Œåˆ é™¤å¯¹åº”çš„ key</span>
    keys<span class="token punctuation">.</span><span class="token method function property-access">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>keys<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¦‚æœå½“å‰é¢‘ç‡å·²ç»ä¸å­˜åœ¨ key</span>
      <span class="token comment">// å°† key åˆ é™¤</span>
      <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">freqs</span><span class="token punctuation">[</span>freq<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æ›´æ–°é¢‘ç‡åŠ  1</span>
    freq <span class="token operator">=</span> <span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token property-access">freq</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token comment">// æ›´æ–°è¯»å–é¢‘ç‡æ•°ç»„</span>
    <span class="token keyword">const</span> freqMap <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">freqs</span><span class="token punctuation">[</span>freq<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">freqs</span><span class="token punctuation">[</span>freq<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    freqMap<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// è®¾ç½®ç¼“å­˜</span>
  <span class="token function">put</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å…ˆåˆ¤æ–­ç¼“å­˜æ˜¯å¦å­˜åœ¨</span>
    <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cache</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¦‚æœå­˜åœ¨ï¼Œåˆ™é‡ç½®ç¼“å­˜çš„å€¼</span>
      cache<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> value
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">active</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> cache<span class="token punctuation">)</span>
      <span class="token keyword control-flow">return</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// åˆ¤æ–­ç¼“å­˜æ˜¯å¦è¶…è¿‡å®¹é‡</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cache</span><span class="token punctuation">)</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">capacity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// è¶…è¿‡å­˜å‚¨å¤§å°ï¼Œåˆ é™¤è®¿é—®é¢‘ç‡æœ€ä½çš„æ•°æ®</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>first<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">freqs</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> keys <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">freqs</span><span class="token punctuation">[</span>first<span class="token punctuation">]</span>
      <span class="token keyword">const</span> latest <span class="token operator">=</span> keys<span class="token punctuation">.</span><span class="token method function property-access">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cache</span><span class="token punctuation">[</span>latest<span class="token punctuation">]</span>
      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>keys<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">freqs</span><span class="token punctuation">[</span>latest<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å†™å…¥ç¼“å­˜ï¼Œé»˜è®¤é¢‘ç‡ä¸º0ï¼Œè¡¨ç¤ºè¿˜æœªä½¿ç”¨è¿‡</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cache</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> value<span class="token punctuation">,</span> freq<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
    <span class="token comment">// å†™å…¥è¯»å–é¢‘ç‡æ•°ç»„</span>
    <span class="token keyword">const</span> freqMap <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">freqs</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">freqs</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    freqMap<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>å®ç°äº†è®¾ç½®ç¼“å­˜çš„æ–¹æ³•åï¼Œå†å®ç°è·å–ç¼“å­˜å°±å¾ˆå®¹æ˜“äº†ã€‚</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">LRUCache</span> <span class="token punctuation">{</span>
  <span class="token comment">// è·å–æ•°æ®</span>
	<span class="token function">get</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cache</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword nil">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token comment">// å¦‚æœ key å¯¹åº”çš„ç¼“å­˜å­˜åœ¨ï¼Œæ›´æ–°å…¶è¯»å–é¢‘ç‡</span>
      <span class="token comment">// ä¹‹å‰å·²ç»å®ç°è¿‡ï¼Œå¯ä»¥ç›´æ¥å¤ç”¨</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">active</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
			<span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cache</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
		<span class="token keyword control-flow">return</span> <span class="token keyword nil">undefined</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<hr>
<p>å…³äº LFU ç¼“å­˜ç®—æ³•å®ç°å°±åˆ°è¿™é‡Œäº†ï¼Œå½“ç„¶è¯¥ç®—æ³•ä¸€èˆ¬ä½¿ç”¨åŒé“¾è¡¨çš„å½¢å¼æ¥å®ç°ï¼Œè¿™é‡Œçš„å®ç°æ–¹å¼ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£å…¶åŸç†ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥åœ¨ç½‘ä¸Šæœç´¢ä¸‹æ›´åŠ é«˜æ•ˆçš„å®ç°æ–¹å¼ã€‚</p></article></section><footer>Powered byÂ <a href="https://github.com/xcatliu/pagic" target="_blank">Pagic</a></footer><script src="https://cdn.pagic.org/react@16.13.1/umd/react.production.min.js"></script><script src="https://cdn.pagic.org/react-dom@16.13.1/umd/react-dom.production.min.js"></script><script type="module" src="/index.js"></script></body></html>