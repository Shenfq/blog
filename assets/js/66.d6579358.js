(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{475:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"å‰è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),s("p",[t._v("æ—©æœŸçš„ Web åº”ç”¨ä¸­ï¼Œä¸åå°è¿›è¡Œäº¤äº’æ—¶ï¼Œéœ€è¦è¿›è¡Œ "),s("code",[t._v("form")]),t._v(" è¡¨å•çš„æäº¤ï¼Œç„¶ååœ¨é¡µé¢åˆ·æ–°åç»™ç”¨æˆ·åé¦ˆç»“æœã€‚åœ¨é¡µé¢åˆ·æ–°è¿‡ç¨‹ä¸­ï¼Œåå°ä¼šé‡æ–°è¿”å›ä¸€æ®µ HTML ä»£ç ï¼Œè¿™æ®µ HTML ä¸­çš„å¤§éƒ¨åˆ†å†…å®¹ä¸ä¹‹å‰é¡µé¢åŸºæœ¬ç›¸åŒï¼Œè¿™åŠ¿å¿…é€ æˆäº†æµé‡çš„æµªè´¹ï¼Œè€Œä¸”ä¸€æ¥ä¸€å›ä¹Ÿå»¶é•¿äº†é¡µé¢çš„å“åº”æ—¶é—´ï¼Œæ€»æ˜¯ä¼šè®©äººè§‰å¾— Web åº”ç”¨çš„ä½“éªŒæ„Ÿæ¯”ä¸ä¸Šå®¢æˆ·ç«¯åº”ç”¨ã€‚")]),t._v(" "),s("p",[t._v("2004 å¹´ï¼Œ"),s("strong",[t._v("AJAX")]),t._v(" å³â€œ"),s("strong",[t._v("Asynchronous JavaScript and XML")]),t._v("â€æŠ€æœ¯æ¨ªç©ºå‡ºä¸–ï¼Œè®© Web åº”ç”¨çš„ä½“éªŒå¾—åˆ°äº†è´¨çš„æå‡ã€‚å†åˆ° 2006 å¹´ï¼ŒjQuery é—®ä¸–ï¼Œå°† Web åº”ç”¨çš„å¼€å‘ä½“éªŒä¹Ÿæé«˜åˆ°äº†æ–°çš„å°é˜¶ã€‚")]),t._v(" "),s("p",[t._v("ç”±äº JavaScript è¯­è¨€å•çº¿ç¨‹çš„ç‰¹ç‚¹ï¼Œä¸ç®¡æ˜¯äº‹ä»¶çš„è§¦å‘è¿˜æ˜¯ AJAX éƒ½æ˜¯é€šè¿‡å›è°ƒçš„æ–¹å¼è¿›è¡Œå¼‚æ­¥ä»»åŠ¡çš„è§¦å‘ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦çº¿æ€§çš„å¤„ç†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œåœ¨ä»£ç ä¸­å°±ä¼šå‡ºç°å¦‚ä¸‹çš„æƒ…å†µï¼š")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("user")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("æˆ‘ä»¬ç»å¸¸å°†è¿™ç§ä»£ç ç§°ä¸ºï¼šâ€œå›è°ƒåœ°ç‹±â€ã€‚")]),t._v(" "),s("h2",{attrs:{id:"äº‹ä»¶ä¸å›è°ƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äº‹ä»¶ä¸å›è°ƒ"}},[t._v("#")]),t._v(" äº‹ä»¶ä¸å›è°ƒ")]),t._v(" "),s("p",[t._v("ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScript çš„è¿è¡Œæ—¶æ˜¯è·‘åœ¨å•çº¿ç¨‹ä¸Šçš„ï¼Œæ˜¯åŸºäºäº‹ä»¶æ¨¡å‹æ¥è¿›è¡Œå¼‚æ­¥ä»»åŠ¡è§¦å‘çš„ï¼Œä¸éœ€è¦è€ƒè™‘å…±äº«å†…å­˜åŠ é”çš„é—®é¢˜ï¼Œç»‘å®šçš„äº‹ä»¶ä¼šæŒ‰ç…§é¡ºåºé½é½æ•´æ•´çš„è§¦å‘ã€‚è¦ç†è§£ JavaScript çš„å¼‚æ­¥ä»»åŠ¡ï¼Œé¦–å…ˆå°±è¦ç†è§£ JavaScript çš„äº‹ä»¶æ¨¡å‹ã€‚")]),t._v(" "),s("p",[t._v("ç”±äºæ˜¯å¼‚æ­¥ä»»åŠ¡ï¼Œæˆ‘ä»¬éœ€è¦ç»„ç»‡ä¸€æ®µä»£ç æ”¾åˆ°æœªæ¥è¿è¡Œï¼ˆæŒ‡å®šæ—¶é—´ç»“æŸæ—¶æˆ–è€…äº‹ä»¶è§¦å‘æ—¶ï¼‰ï¼Œè¿™ä¸€æ®µä»£ç æˆ‘ä»¬é€šå¸¸æ”¾åˆ°ä¸€ä¸ªåŒ¿åå‡½æ•°ä¸­ï¼Œé€šå¸¸ç§°ä¸ºå›è°ƒå‡½æ•°ã€‚")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨æŒ‡å®šæ—¶é—´ç»“æŸæ—¶ï¼Œè§¦å‘çš„å›è°ƒ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("ï¼Œ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("800")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nwindow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resize"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“æµè§ˆå™¨è§†çª—å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘çš„å›è°ƒ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"æœªæ¥è¿è¡Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœªæ¥è¿è¡Œ"}},[t._v("#")]),t._v(" æœªæ¥è¿è¡Œ")]),t._v(" "),s("p",[t._v("å‰é¢è¯´è¿‡å›è°ƒå‡½æ•°çš„è¿è¡Œæ˜¯åœ¨æœªæ¥ï¼Œè¿™å°±è¯´æ˜å›è°ƒä¸­ä½¿ç”¨çš„å˜é‡å¹¶ä¸æ˜¯åœ¨å›è°ƒå£°æ˜é˜¶æ®µå°±å›ºå®šçš„ã€‚")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"i ="')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("è¿™é‡Œè¿ç»­å£°æ˜äº†ä¸‰ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œ"),s("strong",[t._v("100æ¯«ç§’")]),t._v(" åä¼šè¾“å‡ºå˜é‡ "),s("code",[t._v("i")]),t._v(" çš„ç»“æœï¼ŒæŒ‰ç…§æ­£å¸¸çš„é€»è¾‘åº”è¯¥ä¼šè¾“å‡º "),s("code",[t._v("0ã€1ã€2")]),t._v(" è¿™ä¸‰ä¸ªç»“æœã€‚")]),t._v(" "),s("p",[t._v("ç„¶è€Œï¼Œäº‹å®å¹¶éå¦‚æ­¤ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬åˆšå¼€å§‹æ¥è§¦ JavaScript çš„æ—¶å€™ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œå› ä¸ºå›è°ƒå‡½æ•°çš„å®é™…è¿è¡Œæ—¶æœºæ˜¯åœ¨æœªæ¥ï¼Œæ‰€ä»¥è¾“å‡ºçš„ "),s("code",[t._v("i")]),t._v(" çš„å€¼æ˜¯å¾ªç¯ç»“æŸæ—¶çš„å€¼ï¼Œä¸‰ä¸ªå¼‚æ­¥ä»»åŠ¡çš„ç»“æœä¸€è‡´ï¼Œä¼šè¾“å‡ºä¸‰ä¸ª "),s("code",[t._v("i = 3")]),t._v("ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://file.shenfq.com/pic/20210531113319.png",alt:""}})]),t._v(" "),s("p",[t._v("ç»å†è¿‡è¿™ä¸ªé—®é¢˜çš„åŒå­¦ï¼Œä¸€èˆ¬éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é—­åŒ…çš„æ–¹å¼ï¼Œæˆ–è€…é‡æ–°å£°æ˜å±€éƒ¨å˜é‡çš„æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ã€‚")]),t._v(" "),s("h3",{attrs:{id:"äº‹ä»¶é˜Ÿåˆ—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äº‹ä»¶é˜Ÿåˆ—"}},[t._v("#")]),t._v(" äº‹ä»¶é˜Ÿåˆ—")]),t._v(" "),s("p",[t._v("äº‹ä»¶ç»‘å®šä¹‹åï¼Œä¼šå°†æ‰€æœ‰çš„å›è°ƒå‡½æ•°å­˜å‚¨èµ·æ¥ï¼Œç„¶ååœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰å¦å¤–çš„çº¿ç¨‹å¯¹è¿™äº›å¼‚æ­¥è°ƒç”¨çš„å›è°ƒè¿›è¡Œè°ƒåº¦çš„å¤„ç†ï¼Œä¸€æ—¦"),s("strong",[t._v("æ»¡è¶³â€œè§¦å‘â€æ¡ä»¶")]),t._v("å°±ä¼šå°†å›è°ƒå‡½æ•°æ”¾å…¥åˆ°å¯¹åº”çš„äº‹ä»¶é˜Ÿåˆ—ï¼ˆ"),s("code",[t._v("è¿™é‡Œåªæ˜¯ç®€å•çš„ç†è§£æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œå®é™…å­˜åœ¨ä¸¤ä¸ªäº‹ä»¶é˜Ÿåˆ—ï¼šå®ä»»åŠ¡ã€å¾®ä»»åŠ¡")]),t._v("ï¼‰ä¸­ã€‚")]),t._v(" "),s("p",[t._v("æ»¡è¶³è§¦å‘æ¡ä»¶ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š")]),t._v(" "),s("ol",[s("li",[t._v("DOM ç›¸å…³çš„æ“ä½œè¿›è¡Œçš„äº‹ä»¶è§¦å‘ï¼Œæ¯”å¦‚ç‚¹å‡»ã€ç§»åŠ¨ã€å¤±ç„¦ç­‰è¡Œä¸ºï¼›")]),t._v(" "),s("li",[t._v("IO ç›¸å…³çš„æ“ä½œï¼Œæ–‡ä»¶è¯»å–å®Œæˆã€ç½‘ç»œè¯·æ±‚ç»“æŸç­‰ï¼›")]),t._v(" "),s("li",[t._v("æ—¶é—´ç›¸å…³çš„æ“ä½œï¼Œåˆ°è¾¾å®šæ—¶ä»»åŠ¡çš„çº¦å®šæ—¶é—´ï¼›")])]),t._v(" "),s("p",[t._v("ä¸Šé¢çš„è¿™äº›è¡Œä¸ºå‘ç”Ÿæ—¶ï¼Œä»£ç ä¸­ä¹‹å‰æŒ‡å®šçš„å›è°ƒå‡½æ•°å°±ä¼šè¢«æ”¾å…¥ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œä¸»çº¿ç¨‹ä¸€æ—¦ç©ºé—²ï¼Œå°±ä¼šå°†å…¶ä¸­çš„ä»»åŠ¡æŒ‰ç…§"),s("strong",[t._v("å…ˆè¿›å…ˆå‡º")]),t._v("çš„æµç¨‹ä¸€ä¸€æ‰§è¡Œã€‚å½“æœ‰æ–°çš„äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œåˆä¼šé‡æ–°æ”¾å…¥åˆ°å›è°ƒä¸­ï¼Œå¦‚æ­¤å¾ªç¯ğŸ”„ï¼Œæ‰€ä»¥ JavaScript çš„è¿™ä¸€æœºåˆ¶é€šå¸¸è¢«ç§°ä¸ºâ€œäº‹ä»¶å¾ªç¯æœºåˆ¶â€ã€‚")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("ç¬¬")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("ä¸ªsetTimoutè¢«æ‰§è¡Œ")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å¯ä»¥çœ‹åˆ°ï¼Œå…¶è¿è¡Œé¡ºåºæ»¡è¶³é˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºçš„ç‰¹ç‚¹ï¼Œå…ˆå£°æ˜çš„å…ˆè¢«æ‰§è¡Œã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://file.shenfq.com/pic/20210531164049.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"çº¿ç¨‹çš„é˜»å¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çº¿ç¨‹çš„é˜»å¡"}},[t._v("#")]),t._v(" çº¿ç¨‹çš„é˜»å¡")]),t._v(" "),s("p",[t._v("ç”±äº JavaScript å•çº¿ç¨‹çš„ç‰¹ç‚¹ï¼Œå®šæ—¶å™¨å…¶å®å¹¶ä¸å¯é ï¼Œå½“ä»£ç é‡åˆ°é˜»å¡çš„æƒ…å†µï¼Œå³ä½¿äº‹ä»¶åˆ°è¾¾äº†è§¦å‘çš„æ—¶é—´ï¼Œä¹Ÿä¼šä¸€ç›´ç­‰åœ¨ä¸»çº¿ç¨‹ç©ºé—²æ‰ä¼šè¿è¡Œã€‚")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" start "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("å®é™…ç­‰å¾…æ—¶é—´: ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("Date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("ms")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// whileå¾ªç¯è®©çº¿ç¨‹é˜»å¡ 800ms")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("800")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ä¸Šé¢ä»£ç ä¸­ï¼Œå®šæ—¶å™¨è®¾ç½®äº† "),s("code",[t._v("300ms")]),t._v(" åè§¦å‘å›è°ƒå‡½æ•°ï¼Œå¦‚æœä»£ç æ²¡æœ‰é‡åˆ°é˜»å¡ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¼š "),s("code",[t._v("300ms")]),t._v(" åï¼Œä¼šè¾“å‡ºç­‰å¾…æ—¶é—´ã€‚")]),t._v(" "),s("p",[t._v("ä½†æ˜¯æˆ‘ä»¬åœ¨è¿˜æ²¡åŠ äº†ä¸€ä¸ª "),s("code",[t._v("while")]),t._v(" å¾ªç¯ï¼Œè¿™ä¸ªå¾ªç¯ä¼šåœ¨ "),s("code",[t._v("800ms")]),t._v(" åæ‰ç»“æŸï¼Œä¸»çº¿ç¨‹ä¸€ç›´è¢«è¿™ä¸ªå¾ªç¯é˜»å¡åœ¨è¿™é‡Œï¼Œå¯¼è‡´æ—¶é—´åˆ°äº†å›è°ƒå‡½æ•°ä¹Ÿæ²¡æœ‰æ­£å¸¸è¿è¡Œã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://file.shenfq.com/pic/20210531143449.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"promise"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#promise"}},[t._v("#")]),t._v(" Promise")]),t._v(" "),s("p",[t._v("äº‹ä»¶å›è°ƒçš„æ–¹å¼ï¼Œåœ¨ç¼–ç çš„è¿‡ç¨‹ä¸­ï¼Œå°±ç‰¹åˆ«å®¹æ˜“é€ æˆå›è°ƒåœ°ç‹±ã€‚è€Œ Promise æä¾›äº†ä¸€ç§æ›´åŠ çº¿æ€§çš„æ–¹å¼ç¼–å†™å¼‚æ­¥ä»£ç ï¼Œæœ‰ç‚¹ç±»ä¼¼äºç®¡é“çš„æœºåˆ¶ã€‚")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å›è°ƒåœ°ç‹±")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("user")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Promise")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("user")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è¯·æ±‚å¼‚å¸¸'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("Promise åœ¨å¾ˆå¤šè¯­è¨€ä¸­éƒ½æœ‰ç±»ä¼¼çš„å®ç°ï¼Œåœ¨ JavaScript å‘å±•è¿‡ç¨‹ä¸­ï¼Œæ¯”è¾ƒè‘—åçš„æ¡†æ¶ jQueryã€Dojo ä¹Ÿéƒ½è¿›è¡Œè¿‡ç±»ä¼¼çš„å®ç°ã€‚2009 å¹´ï¼Œæ¨å‡ºçš„ CommonJS è§„èŒƒä¸­ï¼ŒåŸºäº "),s("code",[t._v("Dojo.Deffered")]),t._v(" çš„å®ç°æ–¹å¼ï¼Œæå‡º "),s("code",[t._v("Promise/A")]),t._v(" è§„èŒƒã€‚ä¹Ÿæ˜¯è¿™ä¸€å¹´ Node.js æ¨ªç©ºå‡ºä¸–ï¼ŒNode.js å¾ˆå¤šå®ç°éƒ½æ˜¯ä¾ç…§ CommonJS è§„èŒƒæ¥çš„ï¼Œæ¯”è¾ƒç†Ÿæ‚‰çš„å°±æ˜¯å…¶æ¨¡å—åŒ–æ–¹æ¡ˆã€‚")]),t._v(" "),s("p",[t._v("æ—©æœŸçš„ Node.js ä¸­ä¹Ÿå®ç°äº† Promise å¯¹è±¡ï¼Œä½†æ˜¯ 2010 å¹´çš„æ—¶å€™ï¼ŒRyï¼ˆNode.js ä½œè€…ï¼‰è®¤ä¸º Promise æ˜¯ä¸€ç§æ¯”è¾ƒä¸Šå±‚çš„å®ç°ï¼Œè€Œä¸” Node.js çš„å¼€å‘æœ¬æ¥å°±ä¾èµ–äº V8 å¼•æ“ï¼ŒV8 å¼•æ“åŸç”Ÿä¹Ÿæ²¡æœ‰æä¾› Promise çš„æ”¯æŒï¼Œæ‰€ä»¥åæ¥ Node.js çš„æ¨¡å—ä½¿ç”¨äº† "),s("code",[t._v("error-first callback")]),t._v(" çš„é£æ ¼ï¼ˆ"),s("code",[t._v("cb(error, result)")]),t._v("ï¼‰ã€‚")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬ä¸€ä¸ªå‚æ•°ä¸º Error å¯¹è±¡ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºå‡ºç°å¼‚å¸¸")]),t._v("\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./README.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" buffer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("è¿™ä¸€å†³å®šä¹Ÿå¯¼è‡´åæ¥ Node.js ä¸­å‡ºç°äº†å„å¼å„æ ·çš„ Promise ç±»åº“ï¼Œæ¯”è¾ƒå‡ºåçš„å°±æ˜¯ "),s("code",[t._v("Q.js")]),t._v("ã€"),s("code",[t._v("Bluebird")]),t._v("ã€‚å…³äº Promise çš„å®ç°ï¼Œä¹‹å‰æœ‰å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œæ„Ÿå…´è¶£å¯ä»¥çœ‹çœ‹ï¼š"),s("a",{attrs:{href:"https://blog.shenfq.com/posts/2020/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E5%AE%9E%E7%8E%B0%20Promise%20.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€Šæ‰‹æŠŠæ‰‹æ•™ä½ å®ç° Promiseã€‹"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("p",[t._v("åœ¨ Node.js@8 ä¹‹å‰ï¼ŒV8 åŸç”Ÿçš„ Promise å®ç°æœ‰ä¸€äº›æ€§èƒ½é—®é¢˜ï¼Œå¯¼è‡´åŸç”Ÿ Promise çš„æ€§èƒ½ç”šè‡³ä¸å¦‚ä¸€äº›ç¬¬ä¸‰æ–¹çš„ Promise åº“ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://file.shenfq.com/pic/20210601151820.png",alt:""}})]),t._v(" "),s("p",[t._v("æ‰€ä»¥ï¼Œä½ç‰ˆæœ¬çš„ Node.js é¡¹ç›®ä¸­ï¼Œç»å¸¸ä¼šå°† Promise è¿›è¡Œå…¨å±€çš„æ›¿æ¢ï¼š")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Bulebird "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bluebird'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nglobal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Promise "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Bulebird\n")])])]),s("h2",{attrs:{id:"generator-co"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#generator-co"}},[t._v("#")]),t._v(" Generator & co")]),t._v(" "),s("p",[s("code",[t._v("Generator(ç”Ÿæˆå™¨)")]),t._v(" æ˜¯ ES6 æä¾›çš„ä¸€ç§æ–°çš„å‡½æ•°ç±»å‹ï¼Œä¸»è¦æ˜¯ç”¨äºå®šä¹‰ä¸€ä¸ªèƒ½è‡ªæˆ‘è¿­ä»£çš„å‡½æ•°ã€‚é€šè¿‡ "),s("code",[t._v("function *")]),t._v(" çš„è¯­æ³•èƒ½å¤Ÿæ„é€ ä¸€ä¸ª "),s("code",[t._v("Generator")]),t._v(" å‡½æ•°ï¼Œå‡½æ•°æ‰§è¡Œåä¼šè¿”å›ä¸€ä¸ª"),s("code",[t._v("iteration(è¿­ä»£å™¨)")]),t._v("å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å…·æœ‰ä¸€ä¸ª "),s("code",[t._v("next()")]),t._v(" æ–¹æ³•ï¼Œæ¯æ¬¡è°ƒç”¨ "),s("code",[t._v("next()")]),t._v(" æ–¹æ³•å°±ä¼šåœ¨ "),s("code",[t._v("yield")]),t._v(" å…³é”®è¯å‰é¢æš‚åœï¼Œç›´åˆ°å†æ¬¡è°ƒç”¨ "),s("code",[t._v("next()")]),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" len "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" len"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" it "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// { value: 2, done: false }")]),t._v("\nit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// { value: 4, done: false }")]),t._v("\nit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// { value: 6, done: false }")]),t._v("\nit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// { value: undefined, done: true }")]),t._v("\n")])])]),s("p",[s("code",[t._v("next()")]),t._v(" æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§ "),s("code",[t._v("value")]),t._v("ã€"),s("code",[t._v("done")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("value")]),t._v("ï¼šè¡¨ç¤º "),s("code",[t._v("yield")]),t._v(" åé¢çš„å€¼ï¼›")]),t._v(" "),s("li",[s("code",[t._v("done")]),t._v("ï¼šè¡¨ç¤ºå‡½æ•°æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼›")])]),t._v(" "),s("p",[t._v("ç”±äºç”Ÿæˆå™¨å‡½æ•°å…·æœ‰ä¸­æ–­æ‰§è¡Œçš„ç‰¹ç‚¹ï¼Œå°†ç”Ÿæˆå™¨å‡½æ•°å½“åšä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„å®¹å™¨ï¼Œå†é…åˆä¸Š Promise å¯¹è±¡çš„ then æ–¹æ³•å¯ä»¥å°†äº¤å›å¼‚æ­¥é€»è¾‘çš„æ‰§è¡Œæƒï¼Œåœ¨æ¯ä¸ª "),s("code",[t._v("yeild")]),t._v(" åé¢éƒ½åŠ ä¸Šä¸€ä¸ª Promise å¯¹è±¡ï¼Œå°±èƒ½è®©è¿­ä»£å™¨ä¸åœçš„å¾€ä¸‹æ‰§è¡Œã€‚")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("gen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("token")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" g "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("gen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxxx-token'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‰§è¡Œ next æ–¹æ³•è¿”å›çš„ value ä¸ºä¸€ä¸ª Promise å¯¹è±¡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" promise1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" g"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\npromise1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("user")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¼ å…¥ç¬¬äºŒä¸ª next æ–¹æ³•çš„å€¼ï¼Œä¼šè¢«ç”Ÿæˆå™¨ä¸­ç¬¬ä¸€ä¸ª yield å…³é”®è¯å‰é¢çš„å˜é‡æ¥å—")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¾€åæ¨ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œç¬¬ä¸‰ä¸ª next æ–¹æ³•çš„å€¼ï¼Œä¼šè¢«ç¬¬äºŒä¸ª yield å‰é¢çš„å˜é‡æ¥å—")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åªæœ‰ç¬¬ä¸€ä¸ª next æ–¹æ³•çš„å€¼ä¼šè¢«æŠ›å¼ƒ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" promise2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gen"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value\n  promise2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cId")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" promise3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" done "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gen"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¾æ¬¡å…ˆåä¼ é€’ï¼Œç›´åˆ° next æ–¹æ³•è¿”å›çš„ done ä¸º true")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("æˆ‘ä»¬å°†ä¸Šé¢çš„é€»è¾‘è¿›è¡Œä¸€ä¸‹æŠ½è±¡ï¼Œè®©æ¯ä¸ª Promise å¯¹è±¡æ­£å¸¸è¿”å›åï¼Œå°±è‡ªåŠ¨è°ƒç”¨ nextï¼Œè®©è¿­ä»£å™¨è¿›è¡Œè‡ªæ‰§è¡Œï¼Œç›´åˆ°æ‰§è¡Œå®Œæ¯•ï¼ˆä¹Ÿå°±æ˜¯ "),s("code",[t._v("done")]),t._v(" ä¸º "),s("code",[t._v("true")]),t._v("ï¼‰ã€‚")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("co")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("gen"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" g "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("gen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" done "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" g"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("done"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" promise\n    promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°† promise çš„ç»“æœä¼ å…¥ä¸‹ä¸€ä¸ª yield")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼€å§‹è‡ªæ‰§è¡Œ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("co")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gen"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxxx-token'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("è¿™ä¹Ÿå°±æ˜¯ "),s("code",[t._v("koa")]),t._v(" æ—©æœŸçš„æ ¸å¿ƒåº“ "),s("code",[t._v("co")]),t._v(" çš„å®ç°é€»è¾‘ï¼Œåªæ˜¯ "),s("code",[t._v("co")]),t._v(" è¿›è¡Œäº†ä¸€äº›å‚æ•°æ ¡éªŒä¸é”™è¯¯å¤„ç†ã€‚é€šè¿‡ generator åŠ ä¸Š co èƒ½å¤Ÿè®©å¼‚æ­¥æµç¨‹æ›´åŠ çš„ç®€å•æ˜“è¯»ï¼Œå¯¹å¼€å‘è€…è€Œè¨€è‚¯å®šæ˜¯é˜¶æ®µæ¬¢å–œçš„ä¸€ä»¶äº‹ã€‚")]),t._v(" "),s("h2",{attrs:{id:"async-await"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#async-await"}},[t._v("#")]),t._v(" async/await")]),t._v(" "),s("p",[s("code",[t._v("async/await")]),t._v(" å¯ä»¥è¯´æ˜¯ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆï¼Œå…¶å®æœ¬è´¨ä¸Šå°±æ˜¯ Generator & co çš„ä¸€ä¸ªè¯­æ³•ç³–ï¼Œåªéœ€è¦åœ¨å¼‚æ­¥çš„ç”Ÿæˆå™¨å‡½æ•°å‰åŠ ä¸Š "),s("code",[t._v("async")]),t._v("ï¼Œç„¶åå°†ç”Ÿæˆå™¨å‡½æ•°å†…çš„ "),s("code",[t._v("yield")]),t._v(" æ›¿æ¢ä¸º "),s("code",[t._v("await")]),t._v("ã€‚")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("token")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fun")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("code",[t._v("async")]),t._v(" å‡½æ•°å°†è‡ªæ‰§è¡Œå™¨è¿›è¡Œäº†å†…ç½®ï¼ŒåŒæ—¶ "),s("code",[t._v("await")]),t._v(" åä¸é™åˆ¶ä¸º Promise å¯¹è±¡ï¼Œå¯ä»¥ä¸ºä»»æ„å€¼ï¼Œè€Œä¸” "),s("code",[t._v("async/await")]),t._v(" åœ¨è¯­ä¹‰ä¸Šæ¯”èµ·ç”Ÿæˆå™¨çš„ yield æ›´åŠ æ¸…æ¥šï¼Œä¸€çœ¼å°±èƒ½æ˜ç™½è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);